<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>è¥¿ä¸­å³¶å—æ–¹ é£Ÿã¹é£²ã¿ãƒãƒƒãƒ—ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆä»˜ãï¼‰</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
<style>
  html, body, #map { height: 100%; margin: 0; }
  .emoji-marker {
    background: #fff;
    border: 2px solid #333;
    border-radius: 16px;
    width: 32px; height: 32px;
    display: flex; align-items: center; justify-content: center;
    font-size: 18px; line-height: 32px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  }
  .legend {
    background: rgba(255,255,255,0.95);
    padding: 8px 10px;
    border-radius: 8px;
    line-height: 1.6;
    font: 14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, 'Hiragino Kaku Gothic ProN', 'Noto Sans JP', Meiryo, sans-serif;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  }
  .legend h4 { margin: 0 0 6px; font-size: 14px; }
  .legend .row { display:flex; gap:6px; align-items:center; }
  .legend .icon { width: 22px; height:22px; display:flex; justify-content:center; align-items:center; border:1px solid #333; border-radius:6px; background:#fff; }
  .leaflet-popup-content-wrapper { border-radius: 12px; }
  .leaflet-control-layers-expanded { border-radius: 10px; }
</style>
</head>
<body>
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
<script>
  const map = L.map('map').setView([34.726, 135.4993], 16);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  const genreGroups = {}
  const genreIcons = {"ç„¼è‚‰": "ğŸ¥©", "ç„¼ãé³¥": "ğŸ¢", "å±…é…’å±‹": "ğŸ¶", "ç«‹ã¡é£²ã¿": "ğŸº", "é‰„æ¿/ãŠå¥½ã¿ç„¼ã": "ğŸ”¥", "å¯¿å¸": "ğŸ£", "ãƒ©ãƒ¼ãƒ¡ãƒ³": "ğŸœ", "ãƒãƒ¼": "ğŸ¸"}

  function iconForGenre(g) {
    return L.divIcon({
      html: `<div class="emoji-marker">${genreIcons[g] || "ğŸ“"}</div>`,
      className: '',
      iconSize: [32,32],
      iconAnchor: [16,16],
      popupAnchor: [0,-16]
    });
  }

  const places = [{"name": "æ¿å‰ç„¼è‚‰ ä¸€ç¬‘ è¥¿ä¸­å³¶", "lat": 34.728318, "lng": 135.500197, "genre": "ç„¼è‚‰", "homepage": "https://k726002.gorp.jp/", "comment": "å’Œç‰›ä¸­å¿ƒã€‚ä¸Šå¡©ã‚¿ãƒ³ãƒ»ç‰¹ä¸Šãƒ­ãƒ¼ã‚¹ãƒ»ç‰¹é¸ãƒãƒ©ãƒŸãŒè©•åˆ¤ã€‚"}, {"name": "è‚‰è™• ãã£ã—ã‚ƒã‚“ è¥¿ä¸­å³¶ç·æœ¬åº—", "lat": 34.726623, "lng": 135.500157, "genre": "ç„¼è‚‰", "homepage": "https://mjybeef.com/sohonten/", "comment": "A5ä½è³€ç‰›ã‚’ä¸­å¿ƒã«åšåˆ‡ã‚Šã‚¿ãƒ³ã‚„â€œã™ãã‚„ããƒ­ãƒ¼ã‚¹â€ãŒåç‰©ã€‚"}, {"name": "ä¸ƒè¼ªç„¼é³¥ ä¸€é³¥ è¥¿ä¸­å³¶åº—", "lat": 34.726148, "lng": 135.500025, "genre": "ç„¼ãé³¥", "homepage": "https://nishinakajima.yakitori-icchou.com/", "comment": "ç‚­ç«ç„¼ãã®ç‹é“ã€‚çš®ãƒ»ã›ã›ã‚Šãƒ»ãƒ¤ã‚²ãƒ³ãªã©ä¸²ãŒå……å®Ÿã€‚"}, {"name": "å‚™é•·ç‚­ç„¼ãé³¥ ãˆã‚“ã®ã° è¥¿ä¸­å³¶åº—", "lat": 34.726278, "lng": 135.49906, "genre": "ç„¼ãé³¥", "homepage": "https://s.tabelog.com/osaka/A2701/A270301/27137141/", "comment": "å‚™é•·ç‚­ã®ä¸²ã¨åœ°é¶ã‚‚ã‚‚ç‚­ç«ç„¼ã€‚ã€†ã®é¶ã ã—èŒ¶æ¼¬ã‘ã‚„é¶ç™½æ¹¯ã‚‚â—"}, {"name": "ä¸‹ç”ºå±…é…’å±‹ ã‚ã‚ŠãŒãŸã‚„ãã€œ", "lat": 34.726724, "lng": 135.499319, "genre": "å±…é…’å±‹", "homepage": "https://arigatayaa.foodre.jp/", "comment": "é¶ãŠé€ ã‚ŠãŒçœ‹æ¿ã€‚â€œæ˜­å’Œã®ã‹ã—ã‚æšã’â€â€œã¡ã‚Šã¨ã‚Šãƒ›ãƒ«ãƒ¢ãƒ³â€ã‚‚äººæ°—ã€‚"}, {"name": "é…’ã‚¹ã‚¿ãƒ³ãƒ‰ é­šè”µ è¥¿ä¸­å³¶3ä¸ç›®åº—", "lat": 34.725921, "lng": 135.498952, "genre": "ç«‹ã¡é£²ã¿", "homepage": "https://kc8d206.gorp.jp/", "comment": "ç«‹ã¡é£²ã¿æµ·é®®ã€‚åˆºèº«5ç¨®ç››ãªã©é®®é­šãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒçœ‹æ¿ã€‚"}, {"name": "ç«‹å–°é…’å ´ é‡‘ç…å­ è¥¿ä¸­å³¶å—æ–¹åº—", "lat": 34.72651, "lng": 135.497686, "genre": "ç«‹ã¡é£²ã¿", "homepage": "https://s.tabelog.com/osaka/A2701/A270301/27067834/", "comment": "æ—¥æ›¿ã‚ã‚Šã®é­šä»‹ã‚„ä¸€å“ãŒæ¥½ã—ã„ç«‹ã¡é£²ã¿ã€‚â€œãƒ“ãƒ•ãƒ†ã‚­â€ã‚‚äººæ°—ã€‚"}, {"name": "ã‚„ãã‚„ãé‰„æ¿ ã¼ã‚“ãã‚‰å®¶ è¥¿ä¸­å³¶åº—", "lat": 34.726704, "lng": 135.499248, "genre": "é‰„æ¿/ãŠå¥½ã¿ç„¼ã", "homepage": "https://c770939.gorp.jp/", "comment": "åç‰©â€œç‰›ã™ã˜ã‚³ãƒ³ãã°ã‚ã—â€ã€‚ç²‰ã‚‚ã‚“ï¼†é‰„æ¿ã¤ã¾ã¿ãŒè±Šå¯Œã€‚"}, {"name": "ã­ãç„¼ãƒ»ãŠå¥½ã¿ç„¼ã å’Œï¼ˆã‹ãšï¼‰", "lat": 34.725893, "lng": 135.499686, "genre": "é‰„æ¿/ãŠå¥½ã¿ç„¼ã", "homepage": "https://tabelog.com/osaka/A2701/A270301/27018403/", "comment": "é†¤æ²¹å‘³ã®â€œã™ã˜ã­ãç„¼â€ãŒåç‰©ã€‚é‡ã­ç„¼ãã‚¹ã‚¿ã‚¤ãƒ«ã§é¦™ã°ã—ã„ã€‚"}, {"name": "é®¨ãƒ»é…’ãƒ»è‚´ æ‰ç‰ è¥¿ä¸­å³¶å—æ–¹", "lat": 34.725894, "lng": 135.499717, "genre": "å¯¿å¸", "homepage": "https://www.sugidama-sushiizakaya.jp/shop/505/", "comment": "â€œé›²ä¸¹ã¨ã„ãã‚‰ã®ã“ã¼ã‚Œè»è‰¦â€ãªã©æ˜ ãˆï¼†ã‚³ã‚¹ãƒ‘é®¨ã€‚èµ¤ã‚·ãƒ£ãƒªã‚‚ç‰¹å¾´ã€‚"}, {"name": "ã‚„ãã‚‰å¯¿ã—", "lat": 34.725468, "lng": 135.499528, "genre": "å¯¿å¸", "homepage": "https://www.yagurasushi.com/", "comment": "æ˜­å’Œ39å¹´å‰µæ¥­ã®ç”ºå¯¿å¸ã€‚ã«ãã‚Šç››ã‚Šã‚„ç®±å¯¿å¸ã§ã—ã£ã‹ã‚Šã€‚"}, {"name": "äººé¡ã¿ãªéººé¡", "lat": 34.72551, "lng": 135.499043, "genre": "ãƒ©ãƒ¼ãƒ¡ãƒ³", "homepage": "https://www.jinrui-minamenrui.com/", "comment": "â€œåŸç‚¹/ micro/ macroâ€ãŒä¸‰æœ¬æŸ±ã€‚macroã¯è²ç³»ã®ä¸€ç•ªäººæ°—ã€‚"}, {"name": "éººåŒ  ã¯ãªã¿ã¡ æ–°å¤§é˜ªåº—", "lat": 34.727637, "lng": 135.497114, "genre": "ãƒ©ãƒ¼ãƒ¡ãƒ³", "homepage": "https://menshohanamichi.jp/free/shinosaka", "comment": "æ¿ƒåšè±šéª¨ã—ã‚‡ã†ã‚†â€œç‰¹ä¸Šã—ã‚‡ã†ã‚†â€ã‚„å‘³å™ŒãŒå®šç•ªã€‚æ·±å¤œ5æ™‚ã¾ã§ã€‚"}, {"name": "Public Bar STINGERï¼ˆ5F/ä¸²ã‚«ãƒ„ç”°ä¸­ã®ãƒ“ãƒ«ï¼‰", "lat": 34.725868, "lng": 135.499013, "genre": "ãƒãƒ¼", "homepage": "https://stinger2017.jp/food/", "comment": "è‹±å›½ãƒ‘ãƒ–ã€‚ãƒ•ã‚£ãƒƒã‚·ãƒ¥ï¼†ãƒãƒƒãƒ—ã‚¹ã‚„ãƒ­ãƒ¼ã‚¹ãƒˆãƒ“ãƒ¼ãƒ•ã€ã‚¹ãƒ†ã‚£ãƒ¼ãƒ«ãƒ€ãƒ¼ãƒ„å¸¸è¨­ã€‚"}];

  for (const p of places) {
    if (!genreGroups[p.genre]) {
      genreGroups[p.genre] = L.layerGroup().addTo(map);
    }
  }

  for (const p of places) {
    const marker = L.marker([p.lat, p.lng], { icon: iconForGenre(p.genre) });
    const popup = `
      <div style="min-width:220px">
        <div style="font-weight:700; margin-bottom:4px;">${p.name}</div>
        <div style="color:#555; margin-bottom:6px;">ã‚¸ãƒ£ãƒ³ãƒ«ï¼š${p.genre}</div>
        <div style="margin-bottom:6px;">${p.comment}</div>
        <a href="${p.homepage}" target="_blank" rel="noopener">å…¬å¼/æƒ…å ±ãƒšãƒ¼ã‚¸ã‚’é–‹ã</a>
      </div>`;
    marker.bindPopup(popup);
    genreGroups[p.genre].addLayer(marker);
  }

  const overlays = {}
  Object.keys(genreGroups).forEach(g => overlays[g] = genreGroups[g]);
  L.control.layers(null, overlays, { collapsed: false }).addTo(map);

  const legend = L.control({ position: 'bottomright' });
  legend.onAdd = function() {
    const div = L.DomUtil.create('div', 'legend');
    div.innerHTML = '<h4>ã‚¸ãƒ£ãƒ³ãƒ«åˆ¥ã‚¢ã‚¤ã‚³ãƒ³</h4>' +
      `<div class='row'><div class='icon'>ğŸ¥©</div><div>ç„¼è‚‰</div></div><div class='row'><div class='icon'>ğŸ¢</div><div>ç„¼ãé³¥</div></div><div class='row'><div class='icon'>ğŸ¶</div><div>å±…é…’å±‹</div></div><div class='row'><div class='icon'>ğŸº</div><div>ç«‹ã¡é£²ã¿</div></div><div class='row'><div class='icon'>ğŸ”¥</div><div>é‰„æ¿/ãŠå¥½ã¿ç„¼ã</div></div><div class='row'><div class='icon'>ğŸ£</div><div>å¯¿å¸</div></div><div class='row'><div class='icon'>ğŸœ</div><div>ãƒ©ãƒ¼ãƒ¡ãƒ³</div></div><div class='row'><div class='icon'>ğŸ¸</div><div>ãƒãƒ¼</div></div>`;
    return div;
  };
  legend.addTo(map);
</script>
</body>
</html>
