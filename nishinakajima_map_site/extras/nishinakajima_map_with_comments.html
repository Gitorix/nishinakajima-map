<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>西中島南方 食べ飲みマップ（コメント付き）</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
<style>
  html, body, #map { height: 100%; margin: 0; }
  .emoji-marker {
    background: #fff;
    border: 2px solid #333;
    border-radius: 16px;
    width: 32px; height: 32px;
    display: flex; align-items: center; justify-content: center;
    font-size: 18px; line-height: 32px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  }
  .legend {
    background: rgba(255,255,255,0.95);
    padding: 8px 10px;
    border-radius: 8px;
    line-height: 1.6;
    font: 14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, 'Hiragino Kaku Gothic ProN', 'Noto Sans JP', Meiryo, sans-serif;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  }
  .legend h4 { margin: 0 0 6px; font-size: 14px; }
  .legend .row { display:flex; gap:6px; align-items:center; }
  .legend .icon { width: 22px; height:22px; display:flex; justify-content:center; align-items:center; border:1px solid #333; border-radius:6px; background:#fff; }
  .leaflet-popup-content-wrapper { border-radius: 12px; }
  .leaflet-control-layers-expanded { border-radius: 10px; }
</style>
</head>
<body>
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
<script>
  const map = L.map('map').setView([34.726, 135.4993], 16);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  const genreGroups = {}
  const genreIcons = {"焼肉": "🥩", "焼き鳥": "🍢", "居酒屋": "🍶", "立ち飲み": "🍺", "鉄板/お好み焼き": "🔥", "寿司": "🍣", "ラーメン": "🍜", "バー": "🍸"}

  function iconForGenre(g) {
    return L.divIcon({
      html: `<div class="emoji-marker">${genreIcons[g] || "📍"}</div>`,
      className: '',
      iconSize: [32,32],
      iconAnchor: [16,16],
      popupAnchor: [0,-16]
    });
  }

  const places = [{"name": "板前焼肉 一笑 西中島", "lat": 34.728318, "lng": 135.500197, "genre": "焼肉", "homepage": "https://k726002.gorp.jp/", "comment": "和牛中心。上塩タン・特上ロース・特選ハラミが評判。"}, {"name": "肉處 きっしゃん 西中島総本店", "lat": 34.726623, "lng": 135.500157, "genre": "焼肉", "homepage": "https://mjybeef.com/sohonten/", "comment": "A5佐賀牛を中心に厚切りタンや“すきやきロース”が名物。"}, {"name": "七輪焼鳥 一鳥 西中島店", "lat": 34.726148, "lng": 135.500025, "genre": "焼き鳥", "homepage": "https://nishinakajima.yakitori-icchou.com/", "comment": "炭火焼きの王道。皮・せせり・ヤゲンなど串が充実。"}, {"name": "備長炭焼き鳥 えんのば 西中島店", "lat": 34.726278, "lng": 135.49906, "genre": "焼き鳥", "homepage": "https://s.tabelog.com/osaka/A2701/A270301/27137141/", "comment": "備長炭の串と地鶏もも炭火焼。〆の鶏だし茶漬けや鶏白湯も◎"}, {"name": "下町居酒屋 ありがたやぁ〜", "lat": 34.726724, "lng": 135.499319, "genre": "居酒屋", "homepage": "https://arigatayaa.foodre.jp/", "comment": "鶏お造りが看板。“昭和のかしわ揚げ”“ちりとりホルモン”も人気。"}, {"name": "酒スタンド 魚蔵 西中島3丁目店", "lat": 34.725921, "lng": 135.498952, "genre": "立ち飲み", "homepage": "https://kc8d206.gorp.jp/", "comment": "立ち飲み海鮮。刺身5種盛など鮮魚メニューが看板。"}, {"name": "立喰酒場 金獅子 西中島南方店", "lat": 34.72651, "lng": 135.497686, "genre": "立ち飲み", "homepage": "https://s.tabelog.com/osaka/A2701/A270301/27067834/", "comment": "日替わりの魚介や一品が楽しい立ち飲み。“ビフテキ”も人気。"}, {"name": "やきやき鉄板 ぼんくら家 西中島店", "lat": 34.726704, "lng": 135.499248, "genre": "鉄板/お好み焼き", "homepage": "https://c770939.gorp.jp/", "comment": "名物“牛すじコンそばめし”。粉もん＆鉄板つまみが豊富。"}, {"name": "ねぎ焼・お好み焼き 和（かず）", "lat": 34.725893, "lng": 135.499686, "genre": "鉄板/お好み焼き", "homepage": "https://tabelog.com/osaka/A2701/A270301/27018403/", "comment": "醤油味の“すじねぎ焼”が名物。重ね焼きスタイルで香ばしい。"}, {"name": "鮨・酒・肴 杉玉 西中島南方", "lat": 34.725894, "lng": 135.499717, "genre": "寿司", "homepage": "https://www.sugidama-sushiizakaya.jp/shop/505/", "comment": "“雲丹といくらのこぼれ軍艦”など映え＆コスパ鮨。赤シャリも特徴。"}, {"name": "やぐら寿し", "lat": 34.725468, "lng": 135.499528, "genre": "寿司", "homepage": "https://www.yagurasushi.com/", "comment": "昭和39年創業の町寿司。にぎり盛りや箱寿司でしっかり。"}, {"name": "人類みな麺類", "lat": 34.72551, "lng": 135.499043, "genre": "ラーメン", "homepage": "https://www.jinrui-minamenrui.com/", "comment": "“原点/ micro/ macro”が三本柱。macroは貝系の一番人気。"}, {"name": "麺匠 はなみち 新大阪店", "lat": 34.727637, "lng": 135.497114, "genre": "ラーメン", "homepage": "https://menshohanamichi.jp/free/shinosaka", "comment": "濃厚豚骨しょうゆ“特上しょうゆ”や味噌が定番。深夜5時まで。"}, {"name": "Public Bar STINGER（5F/串カツ田中のビル）", "lat": 34.725868, "lng": 135.499013, "genre": "バー", "homepage": "https://stinger2017.jp/food/", "comment": "英国パブ。フィッシュ＆チップスやローストビーフ、スティールダーツ常設。"}];

  for (const p of places) {
    if (!genreGroups[p.genre]) {
      genreGroups[p.genre] = L.layerGroup().addTo(map);
    }
  }

  for (const p of places) {
    const marker = L.marker([p.lat, p.lng], { icon: iconForGenre(p.genre) });
    const popup = `
      <div style="min-width:220px">
        <div style="font-weight:700; margin-bottom:4px;">${p.name}</div>
        <div style="color:#555; margin-bottom:6px;">ジャンル：${p.genre}</div>
        <div style="margin-bottom:6px;">${p.comment}</div>
        <a href="${p.homepage}" target="_blank" rel="noopener">公式/情報ページを開く</a>
      </div>`;
    marker.bindPopup(popup);
    genreGroups[p.genre].addLayer(marker);
  }

  const overlays = {}
  Object.keys(genreGroups).forEach(g => overlays[g] = genreGroups[g]);
  L.control.layers(null, overlays, { collapsed: false }).addTo(map);

  const legend = L.control({ position: 'bottomright' });
  legend.onAdd = function() {
    const div = L.DomUtil.create('div', 'legend');
    div.innerHTML = '<h4>ジャンル別アイコン</h4>' +
      `<div class='row'><div class='icon'>🥩</div><div>焼肉</div></div><div class='row'><div class='icon'>🍢</div><div>焼き鳥</div></div><div class='row'><div class='icon'>🍶</div><div>居酒屋</div></div><div class='row'><div class='icon'>🍺</div><div>立ち飲み</div></div><div class='row'><div class='icon'>🔥</div><div>鉄板/お好み焼き</div></div><div class='row'><div class='icon'>🍣</div><div>寿司</div></div><div class='row'><div class='icon'>🍜</div><div>ラーメン</div></div><div class='row'><div class='icon'>🍸</div><div>バー</div></div>`;
    return div;
  };
  legend.addTo(map);
</script>
</body>
</html>
